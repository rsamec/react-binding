function extractPrototype(t){var e={};for(var r in t.prototype)e[r]=t.prototype[r];return e}var DataBinding;!function(t){var e=function(){function t(t){this.source=t}return t.prototype.getValue=function(t){var e=this.getParent(t);if(void 0!==e){var r=this.getProperty(t);return e[r]}},t.prototype.setValue=function(t,e){var r=this.getParent(t);if(void 0!==r){var n=this.getProperty(t);r[n]=e}},t.prototype.getParent=function(t){var e=t.lastIndexOf(".");return-1!=e?this.string_to_ref(this.source,t.substring(0,e)):this.source},t.prototype.getProperty=function(t){var e=t.lastIndexOf(".");return-1!=e?t.substring(e+1,t.length):t},t.prototype.string_to_ref=function(t,e){var r=e.split("."),n=t[r[0]];if(void 0===n&&(n=t[r[0]]={}),!r[1])return n;r.splice(0,1);var i=r.join(".");return this.string_to_ref(n,i)},t}();t.PathObjectBinder=e;var r=function(){function t(t,r,n,i){this.sourceObject=t,this.path=r,this.notifyChange=n,this.valueConverter=i,this.source=new e(this.sourceObject)}return Object.defineProperty(t.prototype,"requestChange",{get:function(){var t=this;return function(e){t.value=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=void 0===this.path?this.sourceObject:this.source.getValue(this.path);return void 0!==this.valueConverter?this.valueConverter.format(t):t},set:function(t){var e=void 0===this.path?this.sourceObject:this.source.getValue(this.path),r=void 0!==this.valueConverter?this.valueConverter.parse(t):t;e!==r&&(void 0===this.path?void 0!==this.notifyChange&&this.notifyChange(r):(this.source.setValue(this.path,r),void 0!==this.notifyChange&&this.notifyChange()))},enumerable:!0,configurable:!0}),t}();t.PathObjectBinding=r;var n=function(){function t(t,r,n){this.sourceObject=t,this.path=r,this.notifyChange=n,this.source=new e(this.sourceObject)}return Object.defineProperty(t.prototype,"items",{get:function(){var t=void 0===this.path?this.sourceObject:this.source.getValue(this.path);return void 0===t?[]:t.map(function(t){return new r(t,void 0,this.notifyChange)},this)},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=void 0===this.path?this.sourceObject:this.source.getValue(this.path);void 0!==e&&(void 0===t&&(t={}),e.push(t),void 0!==this.notifyChange&&this.notifyChange())},t.prototype.remove=function(t){var e=void 0===this.path?this.sourceObject:this.source.getValue(this.path);if(void 0!==e){var r=e.indexOf(t);-1!==r&&(e.splice(r,1),void 0!==this.notifyChange&&this.notifyChange())}},t}();t.ArrayObjectBinding=n;var i=function(){function t(t,e){this.parentBinding=t,this.relativePath=e}return Object.defineProperty(t.prototype,"source",{get:function(){return this.parentBinding.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notifyChange",{get:function(){return this.parentBinding.notifyChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return void 0===this.parentBinding.path?this.relativePath:[this.parentBinding.path,this.relativePath].join(".")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){if(void 0===this.source)return[];var t=this.source.getValue(this.path);return void 0===t?[]:t.map(function(t){return new r(t,void 0,this.notifyChange)},this)},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this.source.getValue(this.path);void 0!==e&&(void 0===t&&(t={}),e.push(t),void 0!==this.notifyChange&&this.notifyChange())},t.prototype.remove=function(t){var e=this.source.getValue(this.path);if(void 0!==e){var r=e.indexOf(t);-1!==r&&(e.splice(r,1),void 0!==this.notifyChange&&this.notifyChange())}},t}();t.ArrayParentBinding=i;var o=function(){function t(t,e,r){this.parentBinding=t,this.relativePath=e,this.valueConverter=r}return Object.defineProperty(t.prototype,"source",{get:function(){return this.parentBinding.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notifyChange",{get:function(){return this.parentBinding.notifyChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestChange",{get:function(){var t=this;return function(e){t.value=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return void 0===this.parentBinding.path?this.relativePath:[this.parentBinding.path,this.relativePath].join(".")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this.source.getValue(this.path);return void 0!==this.valueConverter?this.valueConverter.format(t):t},set:function(t){var e=this.source.getValue(this.path),r=void 0!==this.valueConverter?this.valueConverter.parse(t):t;e!==r&&(this.source.setValue(this.path,r),void 0!==this.notifyChange&&this.notifyChange())},enumerable:!0,configurable:!0}),t}();t.PathParentBinding=o;var a=function(){function t(){}return t.prototype.createStateKeySetter=function(t,e){var r={};return function(n){r[e]=void 0!==n?n:t.state[e],t.setState(r)}},t.prototype.bindToState=function(t,e,n,i){return new r(this.state[t],e,this.createStateKeySetter(this,t),void 0!==i?new u(n,i):n)},t.prototype.bindTo=function(t,e,r,n){return new o(t,e,void 0!==n?new u(r,n):r)},t.prototype.bindArrayToState=function(t,e){return new n(this.state[t],e,this.createStateKeySetter(this,t))},t.prototype.bindArrayTo=function(t,e){return new i(t,e)},t}();t.BindToMixin=a;var u=function(){function t(t,e){this.formatFce=this.curryParameters(t.format,[e]),this.parseFce=this.curryParameters(t.parse,[e])}return t.prototype.curryParameters=function(t,e){return function(){return t.apply(this,Array.prototype.slice.call(arguments).concat(e))}},t.prototype.format=function(t){return this.formatFce(t)},t.prototype.parse=function(t){return this.parseFce(t)},t}();t.CurryConverter=u;!function(){function t(){}return t.partial=function(t,e){return function(){for(var r=0,n=0;n<e.length&&r<arguments.length;n++)void 0===e[n]&&(e[n]=arguments[r++]);return t.apply(this,e)}},t}()}(DataBinding||(DataBinding={}));var BindToMixin=extractPrototype(DataBinding.BindToMixin);