function extractPrototype(t){var e={};for(var i in t.prototype)e[i]=t.prototype[i];return e}var DataBinding;!function(t){var e=function(){function t(t){this.source=t}return t.prototype.getValue=function(e){var i=this.getParent(e);if(void 0!==i){var r=t.getProperty(e);return i[r]}},t.prototype.setValue=function(e,i){var r=this.getParent(e);if(void 0!==r){var n=t.getProperty(e);r[n]=i}},t.prototype.getParent=function(t){var e=t.lastIndexOf(".");return-1!=e?this.string_to_ref(this.source,t.substring(0,e)):this.source},t.getProperty=function(t){var e=t.lastIndexOf(".");return-1!=e?t.substring(e+1,t.length):t},t.prototype.string_to_ref=function(t,e){var i=e.split("."),r=t[i[0]];if(void 0===r&&(r=t[i[0]]={}),!i[1])return r;i.splice(0,1);var n=i.join(".");return this.string_to_ref(r,n)},t}();t.PathObjectBinder=e;var i=function(){function t(t,i,r,n){this.sourceObject=t,this.path=i,this.notifyChange=r,this.valueConverter=n,this.source=new e(this.sourceObject)}return Object.defineProperty(t.prototype,"requestChange",{get:function(){var t=this;return function(e){t.value=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=void 0===this.path?this.sourceObject:this.source.getValue(this.path);return void 0!==this.valueConverter?this.valueConverter.format(t):t},set:function(t){var e=void 0===this.path?this.sourceObject:this.source.getValue(this.path),i=void 0!==this.valueConverter?this.valueConverter.parse(t):t;e!==i&&(void 0===this.path?void 0!==this.notifyChange&&this.notifyChange(i):(this.source.setValue(this.path,i),void 0!==this.notifyChange&&this.notifyChange()))},enumerable:!0,configurable:!0}),t}();t.PathObjectBinding=i;var r=function(){function t(t,i,r){this.sourceObject=t,this.path=i,this.notifyChange=r,this.source=new e(this.sourceObject)}return Object.defineProperty(t.prototype,"items",{get:function(){var t=void 0===this.path?this.sourceObject:this.source.getValue(this.path);return void 0===t?[]:t.map(function(t){return new i(t,void 0,this.notifyChange)},this)},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=void 0===this.path?this.sourceObject:this.source.getValue(this.path);void 0===e&&(this.source.setValue(this.path,[]),e=this.source.getValue(this.path)),void 0===t&&(t={}),e.push(t),void 0!==this.notifyChange&&this.notifyChange()},t.prototype.remove=function(t){var e=void 0===this.path?this.sourceObject:this.source.getValue(this.path);if(void 0!==e){var i=e.indexOf(t);-1!==i&&(e.splice(i,1),void 0!==this.notifyChange&&this.notifyChange())}},t}();t.ArrayObjectBinding=r;var n=function(){function t(t,e){this.parentBinding=t,this.relativePath=e}return Object.defineProperty(t.prototype,"source",{get:function(){return this.parentBinding.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notifyChange",{get:function(){return this.parentBinding.notifyChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return void 0===this.parentBinding.path?this.relativePath:[this.parentBinding.path,this.relativePath].join(".")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){if(void 0===this.source)return[];var t=this.source.getValue(this.path);return void 0===t?[]:t.map(function(t){return new i(t,void 0,this.notifyChange)},this)},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this.source.getValue(this.path);void 0!==e&&(void 0===t&&(t={}),e.push(t),void 0!==this.notifyChange&&this.notifyChange())},t.prototype.remove=function(t){var e=this.source.getValue(this.path);if(void 0!==e){var i=e.indexOf(t);-1!==i&&(e.splice(i,1),void 0!==this.notifyChange&&this.notifyChange())}},t}();t.ArrayParentBinding=n;var o=function(){function t(t,e,i){this.parentBinding=t,this.relativePath=e,this.valueConverter=i}return Object.defineProperty(t.prototype,"source",{get:function(){return this.parentBinding.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notifyChange",{get:function(){return this.parentBinding.notifyChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestChange",{get:function(){var t=this;return function(e){t.value=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return void 0===this.parentBinding.path?this.relativePath:[this.parentBinding.path,this.relativePath].join(".")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this.source.getValue(this.path);return void 0!==this.valueConverter?this.valueConverter.format(t):t},set:function(t){var e=this.source.getValue(this.path),i=void 0!==this.valueConverter?this.valueConverter.parse(t):t;e!==i&&(this.source.setValue(this.path,i),void 0!==this.notifyChange&&this.notifyChange())},enumerable:!0,configurable:!0}),t}();t.PathParentBinding=o;var a=function(){function t(){}return t.prototype.createStateKeySetter=function(t,e){var i={};return function(r){i[e]=void 0!==r?r:t.state[e],t.setState(i)}},t.prototype.bindToState=function(t,e,r,n){return new i(this.state[t],e,this.createStateKeySetter(this,t),void 0!==n?new s(r,n):r)},t.prototype.bindTo=function(t,e,i,r){return new o(t,e,void 0!==r?new s(i,r):i)},t.prototype.bindArrayToState=function(t,e){return new r(this.state[t],e,this.createStateKeySetter(this,t))},t.prototype.bindArrayTo=function(t,e){return new n(t,e)},t}();t.BindToMixin=a;var s=function(){function t(t,e){this.formatFce=this.curryParameters(t.format,[e]),this.parseFce=this.curryParameters(t.parse,[e])}return t.prototype.curryParameters=function(t,e){return function(){return t.apply(this,Array.prototype.slice.call(arguments).concat(e))}},t.prototype.format=function(t){return this.formatFce(t)},t.prototype.parse=function(t){return this.parseFce(t)},t}();t.CurryConverter=s}(DataBinding||(DataBinding={}));var BindToMixin=extractPrototype(DataBinding.BindToMixin);